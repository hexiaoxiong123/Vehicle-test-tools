# 车载系统监控工具

## 功能说明

`vehicle_system_monitor.sh` 是一个用于车载系统健康检测的Shell脚本，主要用于路测前的系统检查。

## 监控项目

1. **GPS定位状态**
   - 差分定位状态检测
   - 收星数量统计（建议≥20颗）
   - 通过netcat读取NMEA数据

2. **系统资源**
   - CPU使用率
   - 内存剩余空间
   - 磁盘使用率

3. **网络连接**
   - 4G网络连通性测试
   - WIFI驱动状态检查

4. **时间同步**
   - NTP服务器时间同步
   - 时间偏移量检测

5. **外设设备**
   - USB存储设备检测

## 使用方法

```bash
# 给脚本添加执行权限
chmod +x vehicle_system_monitor.sh

# 运行监控
./vehicle_system_monitor.sh
```

## 输出示例

```
==========================================
车载系统健康监控工具 v1.0
==========================================
监控项目：
  - GPS定位状态和收星数量
  - CPU和内存使用率
  - 磁盘空间
  - 4G网络连接
  - NTP时间同步
==========================================
开始监控...（Ctrl+C 停止）

---------- 2025-01-15 10:30:00 ----------
2025-01-15 10:30:00 CPU使用率: 45% (空闲: 55%)
2025-01-15 10:30:00 内存剩余空间: 2048 MB
2025-01-15 10:30:00 4G网络连接正常
-----------------GPS收星数：24--------------------------------------------------------
2025-01-15 10:30:00 当前GPS使用差分定位 - 正常
2025-01-15 10:30:00 当前GPS收星数量为24 - 正常
2025-01-15 10:30:00 磁盘使用率: 65%
2025-01-15 10:30:00 NTP时间同步正常 (偏移: 0.002 秒)
```

## 应用场景

- **路测前检查**：确保GPS信号、网络连接正常
- **长时间测试**：监控系统资源，防止资源不足
- **问题定位**：记录系统状态，辅助问题分析

## 技术要点

- 使用 `netcat` 读取GPS NMEA数据
- 使用 `top`、`free`、`df` 获取系统状态
- 使用 `ping` 测试网络连通性
- 彩色输出（红色表示异常）

## 注意事项

- 需要root权限执行某些命令
- GPS设备IP地址根据实际情况修改（192.168.10.14）
- NTP服务器地址根据实际情况修改（192.168.10.8）
- 监控间隔可根据需要调整（默认10秒）

## 作者

何枭雄 - 5年汽车测试经验

